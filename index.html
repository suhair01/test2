<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Avalyfi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.umd.min.js"></script>
</head>
<body>
  <!-- Header -->
  <div class="header-bar">
    <div class="header-left">
      <img src="logo.jpg" alt="Avaly Logo" class="logo" />
      <span class="brand-name">Avaly</span>
    </div>
    <button class="connect-btn" onclick="connect()">Connect Wallet</button>
    <div class="profile-wrapper" id="profileWrapper" style="display:none;">
      <button class="profile-btn" onclick="toggleProfileMenu()">üë§</button>
      <!-- Profile menu -->
      <div class="profile-menu" id="profileMenu">
        <div class="wallet-info">
          <span id="walletAddress">0x123...abc</span>
          <button class="copy-btn" onclick="copyWallet()">üìã</button>
        </div>
        <button onclick="viewTransactions()">üìë Transactions</button>
        <button onclick="switchToAvalanche()">üîÅ Switch to Avalanche</button>
        <button onclick="disconnect()">‚ùå Disconnect</button>
      </div>
    </div>
  </div>

  <!-- Swap UI -->
  <div class="swap-container">
    <div class="top-actions">
      <button class="reload-btn" onclick="location.reload()" title="Reload">üîÑ</button>
      <div class="settings-wrapper">
        <button class="icon-btn settings-btn" onclick="toggleSlippage()">‚öôÔ∏è</button>
        <div class="slippage-popup" id="slippagePopup">
          <label>Slippage:</label>
          <div class="slippage-input-wrapper">
            <input id="slippage" value="1" />
            <span class="percent-label">%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="token-box">
      <div class="token-row">
        <div class="token-select" onclick="openModal('in')">
          <div class="token-display">
            <img id="inLogo" src="avaxlogo.png" class="token-logo" />
            <span id="inSymbol">AVAX</span>
            <span class="dropdown-arrow">‚ñº</span>
          </div>
          <select id="tokenInSelect" style="display:none;"></select>
        </div>
        <div class="balance" id="balanceIn">Balance: 0</div>
      </div>
      <input
        class="amount-input"
        id="tokenInAmount"
        placeholder="0.0"
        oninput="updateEstimate()"
      />
      <div class="percentage-buttons">
        <button onclick="setPercentage(25)">25%</button>
        <button onclick="setPercentage(50)">50%</button>
        <button onclick="setPercentage(100)">100%</button>
      </div>
    </div>

    <button class="reverse-btn" onclick="reverseTokens()">‚áÖ</button>

    <div class="token-box">
      <div class="token-row">
        <div class="token-select" onclick="openModal('out')">
          <div class="token-display">
            <img id="outLogo" src="usdc.png" class="token-logo" />
            <span id="outSymbol">USDC</span>
            <span class="dropdown-arrow">‚ñº</span>
          </div>
          <select id="tokenOutSelect" style="display:none;"></select>
        </div>
        <div class="balance" id="balanceOut">Balance: 0</div>
      </div>
      <input class="amount-input" id="tokenOutAmount" placeholder="0.0" readonly />
    </div>

    <button class="btn" onclick="swap()" id="swapBtn" disabled>Swap</button>
  </div>

  <!-- Token Modal -->
  <div id="tokenModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title">Select a token</span>
        <button class="close-modal" onclick="closeModal()">√ó</button>
      </div>
      <input
        type="text"
        id="tokenSearch"
        placeholder="Search name or address"
        oninput="filterTokens()"
      />
      <div id="tokenList"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <!-- Social icons -->
      <div class="social-icons">
        <a href="https://twitter.com/yourHandle" target="_blank">
          <img src="./assets/twitter.svg" alt="Twitter">
        </a>
        <a href="https://t.me/yourHandle" target="_blank">
          <img src="./assets/telegram.svg" alt="Telegram">
        </a>
        <a href="https://github.com/yourHandle" target="_blank">
          <img src="./assets/github.svg" alt="GitHub">
        </a>
      </div>

      <!-- Brand -->
      <div class="brand">
        <img src="./assets/logo.svg" alt="Avaly logo" class="footer-logo">
        <div class="brand-text">
          <strong>Avaly</strong><br />
          <small>Seamless DEX on Avalanche</small>
        </div>
      </div>

      <!-- Links -->
      <div class="footer-links">
        <a href="./docs.html">Docs</a>
        <a href="./support.html">Support</a>
      </div>
    </div>
    <p class="legal">¬© Avaly 2025 ¬∑ All rights reserved</p>
  </footer>

  <!-- Transactions overlay + slide-in panel -->
  <div id="txOverlay" class="tx-overlay" onclick="closeTxBar()"></div>
  <div id="txBar" class="tx-menu">
    <div class="tx-header">
      <span>Recent Transactions</span>
      <button class="tx-close" onclick="closeTxBar()">√ó</button>
    </div>
    <div id="txLoader" class="tx-loader"></div>
    <ul id="txList" class="tx-list"></ul>
    <div id="txEmpty" class="tx-empty">No transactions found.</div>
  </div>

  <div id="toastContainer"></div>
  <script src="script.js"></script>
</body>
</html>
